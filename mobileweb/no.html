 <!DOCTYPE html>
<html> 
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/airtable@0.11.6/lib/airtable.umd.min.js"></script>

<head>
  <title>Fatima's Friends</title> 
 </head>

 <body>
  <div class="hersey">
    <h2 class="yazi">Hi friend! <br> Send a flower to Fatima. :)</h2>
    <div class="flowers">
        <img src="1.png" onclick="showPopup()">
        <img src="2.png" onclick="showPopup()">
        <img src="3.png" onclick="showPopup()">
        <img src="4.png" onclick="showPopup()">
        <img src="5.png" onclick="showPopup()">
        <img src="6.png" onclick="showPopup()">
        <img src="7.png" onclick="showPopup()">
        <img src="8.png" onclick="showPopup()">
        <img src="9.png" onclick="showPopup()">
        <img src="10.png" onclick="showPopup()">
      </div>
      </div>

      <div class="popup">
        <div class="popup-content">
            <span class="close" onclick="hidePopup()">&times;</span>
            <h3>Nice pick!</h3>
            <form>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name"><br><br>
                <label for="note">Note:</label>
                <textarea id="note" name="note"></textarea><br><br>
                <button type="button" onclick="send()"  id="sendButton">Send</button>
            </form>
        </div>
    </div>

    <footer>
     <a href="fatima.html"><p>home</p></a>
   </footer>

   <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/airtable@0.11.6/lib/airtable.umd.min.js"></script>



     <script>
        var popup = document.querySelector('.popup');

        var selectedImage;

        // Add event listeners to each image
        var images = document.querySelectorAll('.flowers img');
        images.forEach(function(img) {
          img.addEventListener('click', function(event) {
            // Store the clicked image in a variable
            selectedImage = event.target.src;
            console.log(selectedImage);
            showModal(selectedImage);
          });
        });

      function showModal(selectedImage) {
        // Get the modal and button elements
        var modal = document.getElementById('myModal');
        var button = document.getElementById('sendButton');

        // Display the modal
        modal.style.display = "block";
      }


        // Send data to Airtable using Axios
        axios.post('https://api.airtable.com/v0/appIHcFiArrefYhTE/Flowers', {
          fields: {
            Name: name,
            Note: note,
            Flowers: [{url: selectedImage}]
          }
        }, {
          headers: {
            'Authorization': 'Bearer key2mO7mZvq0vvHqA',
            'Content-Type': 'application/json'
          }
        })
        .then(function(response) {
          console.log(response);
        })
        .catch(function(error) {
          console.log(error);
        });

        hidePopup();

        function showPopup() {
        popup.style.display = 'flex';
        }
      
        function hidePopup() {
            popup.style.display = 'none';
        }
        function send() {
            var name = document.getElementById('name').value;
            var note = document.getElementById('note').value;
            console.log('Name:', name);
            console.log('Note:', note);
            hidePopup();
        }
        function sendToAirtable() {
        const BASE_ID = 'appIHcFiArrefYhTE';
        const TABLE_NAME = 'SentForFatima';
        const API_KEY = 'key2mO7mZvq0vvHqA';

        const data = {
          fields: {
            Flowers: selectedImage,
            Name: name,
            Note: note
          }
        };

        axios.post(`https://api.airtable.com/v0/${appIHcFiArrefYhTE}/${tbl6TnVsVR92nLqsL}`, data, {
          headers: {
            Authorization: `Bearer ${key2mO7mZvq0vvHqA}`,
            'Content-Type': 'application/json'
          }
        })
        
        .then(function (response) {
          console.log(response);
        })
        .catch(function (error) {
          console.log(error);
        });
      }

      function send() {
      name = document.getElementById('name').value;
      note = document.getElementById('note').value;
      sendToAirtable();
      hidePopup();
    }


    </script>
    </body>
 
 </html> 